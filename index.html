<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="//cdn.8thwall.com/web/aframe/8frame-0.8.2.min.js"></script>
    <script defer src="//cdn.8thwall.com/web/xrextras/xrextras.js"></script>
    <title>Document</title>
    <script src="//apps.8thwall.com/xrweb?appKey=sLpsgZaNAKdePFfBPLijpi2xiCV4wzmLVAutdWhkugaRqwZB09CQhHdxbpTJoCvbaDCdM">
    </script>
   <script>
    // Component that places model where the ground is clicked
    AFRAME.registerComponent('tap-place', {
      init: function() {
        const ground = document.getElementById('ground')
        ground.addEventListener('click', event => {
          // Create new entity for the new object
          const newElement = document.createElement('a-entity')
          // The raycaster gives a location of the touch in the scene
          const touchPoint = event.detail.intersection.point
          newElement.setAttribute('position', touchPoint)
          newElement.setAttribute('visible', 'true')
          newElement.setAttribute('scale', '0.5 0.5 0.5')
          newElement.setAttribute('id', 'Catapult')
          newElement.setAttribute('gltf-model', '#Catapult')
          this.el.sceneEl.appendChild(newElement)
          newElement.addEventListener('model-loaded', () => {
            // Once the model is loaded, we are ready to show it popping in using an animation
            newElement.setAttribute('visible', 'true')
            newElement.setAttribute('animation', {
              property: 'scale',
              to: '0.01 0.01 0.01',
              easing: 'easeOutElastic',
              dur: 800,
            })
          })
        })
      }
    })
  </script>

<body>
    <a-scene xrweb tap-place  xrextras-almost-there xrextras-loading xrextras-runtime-error>
        <a-asset-item id="Catapult" src="./assets/Catapult.gltf"></a-asset-item>
        </a-assets>
        <a-camera position="0 8 0" raycaster="objects: .cantap" cursor=" fuse: false;rayOrigin: mouse;" light="intensity:1" id="aCamera">
        </a-camera>
        <a-entity light="type:hemisphere;" position="1 1 0.0001" id="ar-light">
        </a-entity>
        <!-- Adding the cantap class allows the ground to be clicked -->
        <a-entity id="ground" class="cantap" geometry="primitive: box"
            material="color: #ffffff; transparent: true; opacity: 0.0" scale="1000 2 1000" position="0 -1 0">
        </a-entity>
    </a-scene>
</body>

</html>